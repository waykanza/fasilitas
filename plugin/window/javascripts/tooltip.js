TooltipManager={options:{cssClassName:"tooltip",delayOver:200,delayOut:1e3,shiftX:10,shiftY:10,className:"alphacube",width:200,height:null,draggable:false,minimizable:false,maximizable:false,showEffect:Element.show,hideEffect:Element.hide},ajaxInfo:null,elements:null,showTimer:null,hideTimer:null,init:function(e,t,n){TooltipManager.options=Object.extend(TooltipManager.options,n||{});e=TooltipManager.options.cssClassName||"tooltip";TooltipManager.ajaxInfo=t;TooltipManager.elements=$$("."+e);TooltipManager.elements.each(function(e){e=$(e);var n=TooltipManager._getInfo(e);if(n.ajax){e.ajaxId=n.id;e.ajaxInfo=t}else{e.tooltipElement=$(n.id)}e.observe("mouseover",TooltipManager._mouseOver);e.observe("mouseout",TooltipManager._mouseOut)});Windows.addObserver(this)},addHTML:function(e,t){e=$(e);t=$(t);e.tooltipElement=t;e.observe("mouseover",TooltipManager._mouseOver);e.observe("mouseout",TooltipManager._mouseOut)},addAjax:function(e,t){e=$(e);e.ajaxInfo=t;e.observe("mouseover",TooltipManager._mouseOver);e.observe("mouseout",TooltipManager._mouseOut)},addURL:function(e,t,n,r){e=$(e);e.url=t;e.frameWidth=n;e.frameHeight=r;e.observe("mouseover",TooltipManager._mouseOver);e.observe("mouseout",TooltipManager._mouseOut)},close:function(){if(TooltipManager.tooltipWindow)TooltipManager.tooltipWindow.hide()},preloadImages:function(e,t,n){if(!n)n=".gif";$A(t).each(function(t){var r=new Image;r.src=e+"/"+t+n})},_showTooltip:function(e){if(this.element==e)return;while(e&&!e.tooltipElement&&!e.ajaxInfo&&!e.url)e=e.parentNode;this.element=e;TooltipManager.showTimer=null;if(TooltipManager.hideTimer)clearTimeout(TooltipManager.hideTimer);var t=Position.cumulativeOffset(e);var n=e.getDimensions();if(!this.tooltipWindow)this.tooltipWindow=new Window("__tooltip__",TooltipManager.options);this.tooltipWindow.hide();this.tooltipWindow.setLocation(t[1]+n.height+TooltipManager.options.shiftY,t[0]+TooltipManager.options.shiftX);Event.observe(this.tooltipWindow.element,"mouseover",function(t){TooltipManager._tooltipOver(t,e)});Event.observe(this.tooltipWindow.element,"mouseout",function(t){TooltipManager._tooltipOut(t,e)});this.tooltipWindow.height=TooltipManager.options.height;this.tooltipWindow.width=TooltipManager.options.width;if(e.ajaxInfo){var r=e.ajaxInfo.options.parameters;var i=r;if(e.ajaxId){if(r)r+="&id="+e.ajaxId;else r="id="+e.ajaxId}e.ajaxInfo.options.parameters=r||"";this.tooltipWindow.setHTMLContent("");this.tooltipWindow.setAjaxContent(e.ajaxInfo.url,e.ajaxInfo.options);e.ajaxInfo.options.parameters=i}else if(e.url){this.tooltipWindow.setURL(e.url);this.tooltipWindow.setSize(e.frameWidth,e.frameHeight);this.tooltipWindow.height=e.frameHeight;this.tooltipWindow.width=e.frameWidth}else this.tooltipWindow.setHTMLContent(e.tooltipElement.innerHTML);if(!e.ajaxInfo){this.tooltipWindow.show();this.tooltipWindow.toFront()}},_hideTooltip:function(e){if(this.tooltipWindow){this.tooltipWindow.hide();this.element=null}},_mouseOver:function(e){var t=Event.element(e);if(TooltipManager.showTimer)clearTimeout(TooltipManager.showTimer);TooltipManager.showTimer=setTimeout(function(){TooltipManager._showTooltip(t)},TooltipManager.options.delayOver)},_mouseOut:function(e){var t=Event.element(e);if(TooltipManager.showTimer){clearTimeout(TooltipManager.showTimer);TooltipManager.showTimer=null;return}if(TooltipManager.tooltipWindow)TooltipManager.hideTimer=setTimeout(function(){TooltipManager._hideTooltip(t)},TooltipManager.options.delayOut)},_tooltipOver:function(e,t){if(TooltipManager.hideTimer){clearTimeout(TooltipManager.hideTimer);TooltipManager.hideTimer=null}},_tooltipOut:function(e,t){if(TooltipManager.hideTimer==null)TooltipManager.hideTimer=setTimeout(function(){TooltipManager._hideTooltip(t)},TooltipManager.options.delayOut)},_getInfo:function(e){var t=e.className.split(" ").detect(function(e){return e.indexOf("html_")==0});var n=true;if(t)n=false;else t=e.className.split(" ").detect(function(e){return e.indexOf("ajax_")==0});t=t.substr(t.indexOf("_")+1,t.length);return t?{ajax:n,id:t}:null},onBeforeShow:function(e,t){var n=parseFloat(t.getLocation().top);var r=t.element.getDimensions();if(n+r.height>TooltipManager._getScrollTop()+TooltipManager._getPageHeight()){var i=Position.cumulativeOffset(this.element);var n=i[1]-TooltipManager.options.shiftY-r.height;t.setLocation(n,i[0]+TooltipManager.options.shiftX)}},_getPageWidth:function(){return window.innerWidth||document.documentElement.clientWidth||0},_getPageHeight:function(){return window.innerHeight||document.documentElement.clientHeight||0},_getScrollTop:function(){return document.documentElement.scrollTop||window.pageYOffset||0},_getScrollLeft:function(){return document.documentElement.scrollLeft||window.pageXOffset||0}}